import{y as w,z as D,r as i,a as V,b as v,d as C,c as n,e as t,h,l as p,v as _,j as b,f as N,w as B,o as l,u as M,i as R}from"./app-DSpamfmE.js";const j={class:"customers-edit"},q={class:"py-3 mb-4 d-flex align-items-center"},U={key:0,class:"m-0"},E={key:1,class:"m-0"},F={key:2,class:"badge bg-label-success mt-2 ms-3"},J={key:3,class:"badge bg-label-danger mt-2 ms-3"},L={class:"card"},O={class:"card-body"},S={class:"mb-3"},T=t("label",{for:"name",class:"form-label"},"ФИО",-1),z={class:"mb-5 row"},$={class:"col-6"},A=t("label",{for:"phone",class:"form-label"},"Телефон",-1),G={class:"col-6"},H=t("label",{for:"date_birth",class:"form-label"},"Дата рождения",-1),I={class:"mb-3"},Q={__name:"CustomersEdit",setup(K){const f=w(),y=D(),d=i(""),u=i(""),c=i(""),m=i(!1),o=i({success:!1,error:!1});V(()=>{g(f.params.id)});function k(){const s=new FormData,e=JSON.stringify({name:d.value,phone:u.value,date:c.value});s.append("data",e),v.post("/api/customers_store",s).then(r=>{r.data.status==="success"&&(o.value.success=!0,y.push("/customers/edit/"+r.data.customer.id))})}function g(s){s&&v.get("/api/customers_edit/"+s).then(e=>{e.data.customer.length!==0&&(d.value=e.data.customer.name,u.value=e.data.customer.phone,c.value=e.data.customer.date,m.value=!0)})}function x(s){if(s){const e=new FormData,r=JSON.stringify({id:s,name:d.value,phone:u.value,date:c.value});e.append("data",r),v.post("/api/customers_update/"+s,e).then(a=>{a.data.status==="success"?(o.value.error=!1,o.value.success=!0):a.data.status==="error"&&(o.value.success=!1,o.value.error=!0)})}}return(s,e)=>{const r=C("RouterLink");return l(),n("div",j,[t("div",q,[m.value?(l(),n("h4",U,"Редактирование")):(l(),n("h4",E,"Создать контакт")),o.value.success?(l(),n("div",F,"Успешно сохранено")):h("",!0),o.value.error?(l(),n("div",J,"Ошибка")):h("",!0)]),t("div",L,[t("div",O,[t("div",S,[T,p(t("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),required:""},null,512),[[_,d.value]])]),t("div",z,[t("div",$,[A,p(t("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),required:""},null,512),[[_,u.value]])]),t("div",G,[H,p(t("input",{type:"date",name:"date_birth",id:"date_birth",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),required:""},null,512),[[_,c.value]])])]),t("div",I,[m.value?(l(),n("button",{key:0,class:"btn rounded-pill btn-primary",onClick:e[3]||(e[3]=b(a=>x(M(f).params.id),["prevent"]))},"Сохранить")):(l(),n("button",{key:1,class:"btn rounded-pill btn-primary",onClick:b(k,["prevent"])},"Сохранить")),N(r,{to:"/customers",class:"btn rounded-pill btn-outline-secondary ms-4"},{default:B(()=>[R("Назад")]),_:1})])])])])}}};export{Q as default};
