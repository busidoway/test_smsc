import{r as a,a as x,b as v,d as g,c as o,e as t,f,w as b,F as C,g as L,u as N,h as y,o as n,i,t as d,j as V}from"./app-DSpamfmE.js";import{o as j}from"./index-L9GtX3dQ.js";const B={class:"customers"},D=t("h4",{class:"py-3 mb-4"},"Клиенты",-1),F={class:"card"},I={class:"d-flex justify-content-between align-items-center py-2"},M=t("h5",{class:"card-header"},"Клиенты",-1),R={class:"px-4"},$={class:"card-body"},E={class:"table-responsive text-nowrap"},O={class:"table"},S=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"ФИО"),t("th",null,"Телефон"),t("th",null,"Дата рождения"),t("th")])],-1),T={class:"table-border-bottom-0"},q={class:"dropdown"},z=["onClick"],A=t("i",{class:"bx bx-dots-vertical-rounded"},null,-1),G=[A],H=t("i",{class:"bx bx-edit-alt me-1"},null,-1),J=["onClick"],K=t("i",{class:"bx bx-trash me-1"},null,-1),P={key:0,class:"spinner-wrap d-flex justify-content-center py-3"},Q=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),U=[Q],Z={__name:"Customers",setup(W){let u=a([]);const c=a(!0),l=a(!1),_=a(null);x(()=>{h()}),j(_,s=>l.value=!1);function h(){v.post("/api/customers").then(s=>{c.value=!1,u.value=s.data.customers})}function w(s){s&&v.post("/api/customers_delete/"+s).then(p=>{p.data.status==="success"&&(c.value=!0,h())})}return(s,p)=>{const m=g("RouterLink");return n(),o("div",B,[D,t("div",F,[t("div",I,[M,t("div",R,[f(m,{to:"/customers/edit",class:"btn rounded-pill btn-outline-primary"},{default:b(()=>[i("Добавить")]),_:1})])]),t("div",$,[t("div",E,[t("table",O,[S,t("tbody",T,[(n(!0),o(C,null,L(N(u),(e,r)=>(n(),o("tr",null,[t("td",null,d(e.id),1),t("td",null,d(e.name),1),t("td",null,d(e.phone),1),t("td",null,d(e.date),1),t("td",null,[t("div",q,[t("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow",onClick:k=>l.value=l.value===r?null:r},G,8,z),l.value===r?(n(),o("div",{key:0,class:"dropdown-menu",style:{display:"block"},ref_for:!0,ref_key:"target",ref:_},[f(m,{class:"dropdown-item",to:"/customers/edit/"+e.id},{default:b(()=>[H,i(" Редактировать")]),_:2},1032,["to"]),t("a",{class:"dropdown-item cursor-pointer",onClick:V(k=>w(e.id),["prevent"])},[K,i(" Удалить")],8,J)],512)):y("",!0)])])]))),256))])]),c.value?(n(),o("div",P,U)):y("",!0)])])])])}}};export{Z as default};
